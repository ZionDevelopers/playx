<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>PlayX Host for SoundCloud</title>
        <!-- Credit of HTML: http://gmcinema.net/ingame/soundcloud.html -->
        <!-- Favicons: START -->
        <link rel="apple-touch-icon" sizes="180x180" href="/playx/img/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/playx/img/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/playx/img/favicon/favicon-16x16.png">
        <link rel="manifest" href="/playx/img/favicon/site.webmanifest">
        <!-- Favicons: END -->
        <script src="//connect.soundcloud.com/sdk.js"></script>
        <script src="/playx/js/jquery-3.7.0.min.js"></script>
        <script src="/playx/js/common.js"></script>
        <script src="https://w.soundcloud.com/player/api.js"></script>
        <script>
            $(document).ready(function() {
                SC.initialize({
                    client_id: "3775c0743f360c022a2fed672e33909d"
                });

                var widget = SC.Widget(document.querySelector('iframe'));
                widget.load(get('url'), { auto_play: true, sharing: false, liking: false, download: false });
                
                widget.bind(SC.Widget.Events.READY, function(e) {                    
                    widget.seekTo(parseInt(get('t')));
                    widget.setVolume(parseInt(get('vol')));                    
                });
                
                widget.bind(SC.Widget.Events.PLAY_PROGRESS, function (e) {
                    widget.getDuration(function (duration) {
                        sendPlayerData({ Position: e.currentPosition / 1000, Duration: duration / 1000 });
                    });
                });
                
                widget.bind(SC.Widget.Events.LOAD_PROGRESS, function () {
                    sendPlayerData({ State: 'BUFFERING' });
                });
                
                widget.bind(SC.Widget.Events.PLAY, function () {
                    sendPlayerData({ State: 'PLAYING' });
                });
                
                widget.bind(SC.Widget.Events.PAUSE, function () {
                    sendPlayerData({ State: 'PAUSED' });
                });
                
                widget.bind(SC.Widget.Events.FINISH, function () {
                    sendPlayerData({ State: 'COMPLETED' });
                });                
            });
        </script>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-6XKXQZL55B"></script>
        <script src="/playx/js/tracking.js"></script>
    </head>
    <body>
        <script>
            document.write('<iframe id="player" width="100%" height="97%" style="border:0 none" src="https://w.soundcloud.com/player/?url=' + encodeURIComponent(get('url')) + '"></iframe>');
        </script>
    </body>
</html>
